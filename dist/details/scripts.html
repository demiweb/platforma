<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script>

<script
        src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
        crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css">
<script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
<link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css"
/>
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>


<script type="text/javascript" class="main-script" src="./js/scripts.min.js"></script>

<script>
    let searchInput = [...document.querySelectorAll('.search-block input')];

    function searchFocusing() {
        if (searchInput.length) {
            let backPlate = document.querySelector('.search-backplate')
            searchInput.forEach((btn) => {
                btn.addEventListener('focus', () => {
                    backPlate.classList.add('vis');
                    if (btn.value !== '') {
                        btn.closest('.search-wrap').classList.add('ready');
                    }
                });
                btn.addEventListener('focusout', () => {
                    backPlate.classList.remove('vis');
                    btn.closest('.search-wrap').classList.remove('ready');
                });
                btn.addEventListener('input', () => {
                    if (btn.value === '') {
                        btn.closest('.search-wrap').classList.remove('ready');
                    } else {
                        btn.closest('.search-wrap').classList.add('ready');

                    }
                })
            });


        }
    }

    searchFocusing();


    let btnCart = [...document.querySelectorAll('.add-cart')];
    let toCart = [...document.querySelectorAll('.to-cart')];

    function openCartModal() {
        if (btnCart.length) {
            btnCart.forEach((btn) => {
                let mod = document.querySelector('.modal-window[data-modal="cart"]');
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    btn.classList.toggle('active');

                    document.body.classList.add('no-scroll');
                    mod.classList.add('visible');
                })
            });

            toCart.forEach((btn) => {
                let mod = document.querySelector('.modal-window[data-modal="cart"]');
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    document.body.classList.add('no-scroll');
                    mod.classList.add('visible');
                })
            })
        }
    }

    openCartModal();


    //add fav

    let addFav = [...document.querySelectorAll('.add-fav')];

    function addingFav() {
        if (addFav.length) {
            addFav.forEach((btn) => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    btn.classList.toggle('active');
                })
            })
        }
    }

    addingFav();


    //add fav
    //remove fav

    let removeFav = [...document.querySelectorAll('.remove-fav')];

    function removingFav() {
        if (removeFav.length) {
            removeFav.forEach((btn) => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    btn.closest('.product-card').remove();
                })
            })
        }
    }

    removingFav();

    let quantButton = [...document.querySelectorAll('.quantity__button')];

    function upValueQuant() {
        if (!quantButton.length) {

        } else {
            quantButton.forEach((btn) => {
                btn.querySelector('button').addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    if (btn.classList.contains('quantity__button--minus')) {
                        let val = btn.closest('.quantity-field').querySelector('.quantity input').value;
                        if (Number(val) === 0) {

                        } else {
                            let newVal = Number(val) - 1;
                            btn.closest('.quantity-field').querySelector('.quantity input').value = newVal;
                        }


                    } else {
                        let val = btn.closest('.quantity-field').querySelector('.quantity input').value;

                        let newVal = Number(val) + 1;
                        btn.closest('.quantity-field').querySelector('.quantity input').value = newVal;

                    }
                })
            })
        }
    }

    upValueQuant();



</script>